{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!doctype html>
<html lang="{{ LANGUAGE_CODE }}" dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
  <meta charset="utf-8">
  <title>{% trans "Phishing Awareness" %}</title>
  {% if LANGUAGE_CODE == 'ar' %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">
  {% else %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  {% endif %}
</head>
{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('#scenario-content a').forEach(a => {
      a.setAttribute('target', '_blank');
      a.setAttribute('rel', 'noopener noreferrer');
    });
  });
</script>
{% endblock %}
<body class="bg-dark text-light">
  <nav class="navbar navbar-dark bg-black border-bottom border-secondary">
    <div class="container">
      <a class="navbar-brand" href="{% url 'home' %}">{% trans "Phishing Awareness" %}</a>
      <div class="d-flex gap-3 align-items-center">
        <a class="nav-link text-light" href="{% url 'report' %}">{% trans "Reports" %}</a>

        {% if user.is_authenticated %}
          <span class="text-secondary">{% trans "Hi" %} {{ user.username }}</span>
          <a class="btn btn-outline-light btn-sm" href="{% url 'logout' %}">{% trans "Logout" %}</a>
        {% else %}
          <a class="btn btn-outline-light btn-sm" href="{% url 'login' %}">{% trans "Login" %}</a>
          <a class="btn btn-primary btn-sm" href="{% url 'signup' %}">{% trans "Sign up" %}</a>
        {% endif %}

        <form action="{% url 'set_language' %}" method="post" class="d-flex">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ request.get_full_path }}">
          <select name="language" class="form-select form-select-sm" onchange="this.form.submit()">
            <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>English</option>
            <option value="ar" {% if LANGUAGE_CODE == 'ar' %}selected{% endif %}>العربية</option>
          </select>
        </form>
      </div>
    </div>
  </nav>

  <div class="container py-4">
    {% block content %}{% endblock %}
  </div>
</body>
</html>
