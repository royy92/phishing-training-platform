{% extends "training/base.html" %}
{% block content %}

<style>
.fade-in {
  animation: fadeIn 0.8s ease-in-out;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

<div class="container py-5 text-center fade-in">
  <h2 class="text-purple-400 mb-4 fw-bold">ðŸŽ¯ Scenario Completed</h2>

  <div class="card p-4 bg-dark border rounded-3 shadow-lg mx-auto" style="max-width: 650px;">
    <p class="text-light mb-3 fs-5">
      You have completed the scenario: <strong>{{ run.scenario.title }}</strong>.
    </p>

    {% if run.depth_max < steps_done %}
      <p class="text-warning fw-semibold">âš  The simulation was ended early.</p>
    {% else %}
      <p class="text-success fw-semibold">âœ… Youâ€™ve successfully finished all {{ steps_done }} steps!</p>
    {% endif %}

    <!-- ðŸ”¹ Final Score -->
    <div class="mt-4 p-3 rounded-3 bg-secondary bg-opacity-25 border border-secondary">
      <h5 class="mb-2 text-light">Your Final Score</h5>
      <h2 class="fw-bold" style="color:#cba6f7; font-size:3rem;">{{ run.score }}</h2>
      <p class="small mb-0 text-light">Depth Reached: <strong>{{ run.depth_max }}</strong> / {{ steps_done }}</p>
    </div>

    <!-- ðŸ§  Awareness Message -->
    {% if attack_title and attack_message %}
      <div class="alert mt-4 text-start border-0 fade-in"
           style="background-color:#2b2735; color:#fff; border-left:5px solid #cba6f7;">
        <h5 class="fw-bold mb-2 text-danger">{{ attack_icon }} {{ attack_title }}</h5>
        <p class="mb-2">{{ attack_message }}</p>
        {% if awareness_tip %}
          <p class="text-info small mb-0">ðŸ’¡ {{ awareness_tip }}</p>
        {% endif %}
      </div>
    {% endif %}

    <!-- ðŸ”¹ Footer Buttons -->
    <div class="mt-5">
      <a href="{% url 'training:report' %}" class="btn btn-outline-light me-2">View Report</a>
      <a href="{% url 'training:home' %}" class="btn btn-primary"
         style="background-color:#d8b4fe; color:#000; font-weight:600;
                border:none; border-radius:6px; padding:8px 20px;
                transition:all 0.3s ease;"
         onmouseover="this.style.backgroundColor='#e9d5ff'; this.style.transform='scale(1.05)';"
         onmouseout="this.style.backgroundColor='#d8b4fe'; this.style.transform='scale(1)';">
         Back to Home
      </a>
    </div>
  </div>
</div>

{% endblock %}
